Class JPHUD_Start : Actor
{
	States
	{
		Spawn:
			TNT1 A 1 A_RadiusGive("JPHUD_UpdateHealth", 16383.0, RGF_Players|RGF_Monsters|RGF_Objects|RGF_NoSight, 1);
			Loop;
	}
}

Class JPHUD_BaseItem : Inventory
{
	Default
	{
		+Inventory.UnDroppable;
		+Inventory.UnTossable;
		+Inventory.IgnoreSkill;
		+Inventory.AlwaysPickup;
		+Inventory.PersistentPower;
		-Inventory.InvBar;
		Inventory.Amount 1;
		Inventory.MaxAmount 0x7fffffff;
		Inventory.InterHubAmount 0x7fffffff;
	}
}

Class JPHUD_CurrentHealth : JPHUD_BaseItem {}
Class JPHUD_MaxHealth : JPHUD_BaseItem {}

Class JPHUD_UpdateHealth : CustomInventory
{
	States
	{
		Pickup:
			TNT1 A 0
			{
				A_SetInventory ("JPHUD_CurrentHealth", Health);
				If ((Health > GetSpawnHealth()) && (Health >= CountInv ("JPHUD_MaxHealth")))
				{
					A_SetInventory ("JPHUD_MaxHealth", Health);
				}
				If (CountInv ("JPHUD_MaxHealth") < GetSpawnHealth())
				{
					A_SetInventory ("JPHUD_MaxHealth", GetSpawnHealth());
				}
			}
			Stop;
	}
}